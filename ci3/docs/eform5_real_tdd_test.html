<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EForm5 Real TDD Tests - Point 134</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            color: #6f42c1;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
        }
        .test-section h2 {
            color: #495057;
            margin-bottom: 15px;
        }
        .test-case {
            margin: 15px 0;
            padding: 15px;
            border-left: 4px solid #6c757d;
            background-color: #f8f9fa;
        }
        .test-case.running {
            border-left-color: #ffc107;
            background-color: #fff3cd;
        }
        .test-case.success {
            border-left-color: #28a745;
            background-color: #d4edda;
        }
        .test-case.error {
            border-left-color: #dc3545;
            background-color: #f8d7da;
        }
        .test-name {
            font-weight: 600;
            margin-bottom: 8px;
        }
        .test-result {
            font-size: 14px;
            margin-top: 8px;
        }
        .test-details {
            font-size: 12px;
            color: #6c757d;
            margin-top: 5px;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
        .btn {
            background-color: #6f42c1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        .btn:hover {
            background-color: #5a32a3;
        }
        .btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        .summary {
            margin-top: 30px;
            padding: 20px;
            background-color: #e9ecef;
            border-radius: 8px;
            font-weight: 600;
        }
        .progress {
            width: 100%;
            height: 20px;
            background-color: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-bar {
            height: 100%;
            background-color: #6f42c1;
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª EForm5 Real TDD Tests - Point 134</h1>
        
        <div style="text-align: center; margin-bottom: 30px;">
            <button class="btn" onclick="runAllTests()">åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦</button>
            <button class="btn" onclick="runApiTests()">åŸ·è¡Œ API æ¸¬è©¦</button>
            <button class="btn" onclick="runFrontendTests()">åŸ·è¡Œå‰ç«¯æ¸¬è©¦</button>
            <button class="btn" onclick="clearResults()">æ¸…é™¤çµæœ</button>
        </div>

        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div id="progressText" style="text-align: center; margin: 10px 0;">æº–å‚™å°±ç·’</div>

        <div class="test-section">
            <h2>ğŸ”Œ API é€£æ¥æ¸¬è©¦</h2>
            <div id="api-connection-test" class="test-case">
                <div class="test-name">API åŸºæœ¬é€£æ¥æ¸¬è©¦</div>
                <div class="test-result">ç­‰å¾…åŸ·è¡Œ...</div>
                <div class="test-details"></div>
            </div>
            <div id="api-list-test" class="test-case">
                <div class="test-name">API åˆ—è¡¨è³‡æ–™æ¸¬è©¦</div>
                <div class="test-result">ç­‰å¾…åŸ·è¡Œ...</div>
                <div class="test-details"></div>
            </div>
            <div id="api-structure-test" class="test-case">
                <div class="test-name">API è³‡æ–™çµæ§‹æ¸¬è©¦</div>
                <div class="test-result">ç­‰å¾…åŸ·è¡Œ...</div>
                <div class="test-details"></div>
            </div>
            <div id="api-routes-test" class="test-case">
                <div class="test-name">API è·¯ç”±é…ç½®æ¸¬è©¦</div>
                <div class="test-result">ç­‰å¾…åŸ·è¡Œ...</div>
                <div class="test-details"></div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ’» å‰ç«¯åŠŸèƒ½æ¸¬è©¦</h2>
            <div id="frontend-load-test" class="test-case">
                <div class="test-name">ç®¡ç†é é¢è¼‰å…¥æ¸¬è©¦</div>
                <div class="test-result">ç­‰å¾…åŸ·è¡Œ...</div>
                <div class="test-details"></div>
            </div>
            <div id="frontend-js-test" class="test-case">
                <div class="test-name">JavaScript åŠŸèƒ½æ¸¬è©¦</div>
                <div class="test-result">ç­‰å¾…åŸ·è¡Œ...</div>
                <div class="test-details"></div>
            </div>
            <div id="frontend-modal-test" class="test-case">
                <div class="test-name">è©³ç´°è³‡æ–™ Modal æ¸¬è©¦</div>
                <div class="test-result">ç­‰å¾…åŸ·è¡Œ...</div>
                <div class="test-details"></div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ—„ï¸ è³‡æ–™åº«æ•´åˆæ¸¬è©¦</h2>
            <div id="db-connection-test" class="test-case">
                <div class="test-name">è³‡æ–™åº«é€£æ¥æ¸¬è©¦</div>
                <div class="test-result">ç­‰å¾…åŸ·è¡Œ...</div>
                <div class="test-details"></div>
            </div>
            <div id="db-comprehensive-test" class="test-case">
                <div class="test-name">ç¶œåˆè³‡æ–™æ¸¬è©¦</div>
                <div class="test-result">ç­‰å¾…åŸ·è¡Œ...</div>
                <div class="test-details"></div>
            </div>
        </div>

        <div class="summary" id="testSummary">
            <div id="summaryContent">é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹æ¸¬è©¦</div>
        </div>
    </div>

    <script>
        // Test configuration
        const API_BASE_URL = '/api/eeform/eeform5';
        const ADMIN_PAGE_URL = '/wadmin/admin_eeform/eeform_manage_eeform05';
        
        let testResults = {
            total: 0,
            passed: 0,
            failed: 0,
            running: 0
        };

        // Utility functions
        function log(message) {
            console.log(`[EForm5 TDD] ${new Date().toISOString()}: ${message}`);
        }

        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const completed = testResults.passed + testResults.failed;
            const percentage = testResults.total > 0 ? (completed / testResults.total) * 100 : 0;
            
            progressBar.style.width = percentage + '%';
            progressText.textContent = `${completed}/${testResults.total} æ¸¬è©¦å®Œæˆ (${testResults.passed} é€šé, ${testResults.failed} å¤±æ•—)`;
        }

        function updateTestResult(testId, status, message, details = '') {
            const testElement = document.getElementById(testId);
            if (!testElement) return;

            testElement.className = `test-case ${status}`;
            
            const resultDiv = testElement.querySelector('.test-result');
            const detailsDiv = testElement.querySelector('.test-details');
            
            resultDiv.textContent = message;
            detailsDiv.textContent = details;

            if (status === 'success') {
                testResults.passed++;
            } else if (status === 'error') {
                testResults.failed++;
            }
            
            if (testResults.running > 0) {
                testResults.running--;
            }
            
            updateProgress();
        }

        function startTest(testId) {
            testResults.running++;
            const testElement = document.getElementById(testId);
            if (testElement) {
                testElement.className = 'test-case running';
                testElement.querySelector('.test-result').textContent = 'åŸ·è¡Œä¸­...';
            }
        }

        // API Tests
        async function testApiConnection() {
            const testId = 'api-connection-test';
            startTest(testId);
            
            try {
                const response = await fetch(`${API_BASE_URL}/test`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    updateTestResult(testId, 'success', 'âœ… API é€£æ¥æˆåŠŸ', 
                        `Status: ${response.status}\nResponse: ${JSON.stringify(data, null, 2)}`);
                } else {
                    updateTestResult(testId, 'error', 'âŒ API å›æ‡‰ç•°å¸¸', 
                        `Status: ${response.status}\nResponse: ${JSON.stringify(data, null, 2)}`);
                }
            } catch (error) {
                updateTestResult(testId, 'error', 'âŒ API é€£æ¥å¤±æ•—', 
                    `éŒ¯èª¤: ${error.message}\nURL: ${API_BASE_URL}/test`);
            }
        }

        async function testApiList() {
            const testId = 'api-list-test';
            startTest(testId);
            
            try {
                const response = await fetch(`${API_BASE_URL}/list?page=1&limit=20`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    updateTestResult(testId, 'success', 'âœ… API åˆ—è¡¨è³‡æ–™ç²å–æˆåŠŸ', 
                        `Status: ${response.status}\nTotal Records: ${data.data?.pagination?.total || 0}\nData Count: ${data.data?.data?.length || 0}`);
                } else {
                    updateTestResult(testId, 'error', 'âŒ API åˆ—è¡¨è³‡æ–™ç²å–å¤±æ•—', 
                        `Status: ${response.status}\nResponse: ${JSON.stringify(data, null, 2)}`);
                }
            } catch (error) {
                updateTestResult(testId, 'error', 'âŒ API åˆ—è¡¨è«‹æ±‚å¤±æ•—', 
                    `éŒ¯èª¤: ${error.message}\nURL: ${API_BASE_URL}/list`);
            }
        }

        async function testApiStructure() {
            const testId = 'api-structure-test';
            startTest(testId);
            
            try {
                const response = await fetch(`${API_BASE_URL}/list?page=1&limit=5`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (!response.ok || !data.success) {
                    updateTestResult(testId, 'error', 'âŒ API å›æ‡‰å¤±æ•—', 
                        `Status: ${response.status}\nResponse: ${JSON.stringify(data, null, 2)}`);
                    return;
                }

                // Check expected data structure
                const requiredFields = ['success', 'data'];
                const requiredDataFields = ['data', 'pagination'];
                const requiredPaginationFields = ['current_page', 'total_pages', 'total', 'per_page'];
                
                let structureErrors = [];
                
                // Check top level fields
                requiredFields.forEach(field => {
                    if (!(field in data)) {
                        structureErrors.push(`Missing field: ${field}`);
                    }
                });
                
                // Check data structure
                if (data.data) {
                    requiredDataFields.forEach(field => {
                        if (!(field in data.data)) {
                            structureErrors.push(`Missing data.${field}`);
                        }
                    });
                    
                    // Check pagination structure
                    if (data.data.pagination) {
                        requiredPaginationFields.forEach(field => {
                            if (!(field in data.data.pagination)) {
                                structureErrors.push(`Missing data.pagination.${field}`);
                            }
                        });
                    }
                }
                
                if (structureErrors.length === 0) {
                    updateTestResult(testId, 'success', 'âœ… API è³‡æ–™çµæ§‹æ­£ç¢º', 
                        `çµæ§‹é©—è­‰é€šé\ndata.data.length: ${data.data?.data?.length || 0}\ndata.data.pagination.total: ${data.data?.pagination?.total || 0}`);
                } else {
                    updateTestResult(testId, 'error', 'âŒ API è³‡æ–™çµæ§‹éŒ¯èª¤', 
                        `çµæ§‹éŒ¯èª¤:\n${structureErrors.join('\n')}\n\nå¯¦éš›å›æ‡‰:\n${JSON.stringify(data, null, 2)}`);
                }
                
            } catch (error) {
                updateTestResult(testId, 'error', 'âŒ API çµæ§‹æ¸¬è©¦å¤±æ•—', 
                    `éŒ¯èª¤: ${error.message}`);
            }
        }

        async function testApiRoutes() {
            const testId = 'api-routes-test';
            startTest(testId);
            
            const routes = [
                { path: '/test', description: 'API æ¸¬è©¦ç«¯é»' },
                { path: '/list', description: 'åˆ—è¡¨ç«¯é»' },
                { path: '/comprehensive_test', description: 'ç¶œåˆæ¸¬è©¦ç«¯é»' }
            ];
            
            let routeResults = [];
            
            for (const route of routes) {
                try {
                    const response = await fetch(`${API_BASE_URL}${route.path}`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        }
                    });
                    
                    routeResults.push({
                        ...route,
                        status: response.status,
                        success: response.ok
                    });
                } catch (error) {
                    routeResults.push({
                        ...route,
                        status: 'ERROR',
                        success: false,
                        error: error.message
                    });
                }
            }
            
            const successfulRoutes = routeResults.filter(r => r.success).length;
            const totalRoutes = routeResults.length;
            
            if (successfulRoutes === totalRoutes) {
                updateTestResult(testId, 'success', 'âœ… æ‰€æœ‰è·¯ç”±æ¸¬è©¦é€šé', 
                    `æˆåŠŸè·¯ç”±: ${successfulRoutes}/${totalRoutes}\n${routeResults.map(r => `${r.path}: ${r.status}`).join('\n')}`);
            } else {
                updateTestResult(testId, 'error', 'âŒ éƒ¨åˆ†è·¯ç”±æ¸¬è©¦å¤±æ•—', 
                    `æˆåŠŸè·¯ç”±: ${successfulRoutes}/${totalRoutes}\n${routeResults.map(r => `${r.path}: ${r.status}${r.error ? ' - ' + r.error : ''}`).join('\n')}`);
            }
        }

        // Frontend Tests
        async function testFrontendLoad() {
            const testId = 'frontend-load-test';
            startTest(testId);
            
            // Simulate admin page load test
            try {
                // Check if admin page elements exist in current context
                const hasAdminElements = document.querySelector('.eform5-admin') !== null;
                const hasTableElements = document.querySelector('#data-table-body') !== null;
                const hasModalElements = document.querySelector('#detailModal') !== null;
                
                if (hasAdminElements && hasTableElements && hasModalElements) {
                    updateTestResult(testId, 'success', 'âœ… å‰ç«¯é é¢å…ƒç´ è¼‰å…¥æ­£å¸¸', 
                        `âœ… .eform5-admin: å­˜åœ¨\nâœ… #data-table-body: å­˜åœ¨\nâœ… #detailModal: å­˜åœ¨`);
                } else {
                    updateTestResult(testId, 'error', 'âŒ å‰ç«¯é é¢å…ƒç´ ç¼ºå¤±', 
                        `âŒ .eform5-admin: ${hasAdminElements ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\nâŒ #data-table-body: ${hasTableElements ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\nâŒ #detailModal: ${hasModalElements ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}`);
                }
            } catch (error) {
                updateTestResult(testId, 'error', 'âŒ å‰ç«¯è¼‰å…¥æ¸¬è©¦å¤±æ•—', 
                    `éŒ¯èª¤: ${error.message}`);
            }
        }

        async function testFrontendJavaScript() {
            const testId = 'frontend-js-test';
            startTest(testId);
            
            try {
                // Check if admin object exists and has required methods
                const adminExists = typeof window.admin !== 'undefined';
                const hasLoadData = adminExists && typeof window.admin.loadData === 'function';
                const hasViewDetail = adminExists && typeof window.admin.viewDetail === 'function';
                const hasRenderTable = adminExists && typeof window.admin.renderTable === 'function';
                
                if (adminExists && hasLoadData && hasViewDetail && hasRenderTable) {
                    updateTestResult(testId, 'success', 'âœ… JavaScript åŠŸèƒ½æ¸¬è©¦é€šé', 
                        `âœ… admin ç‰©ä»¶: å­˜åœ¨\nâœ… loadData æ–¹æ³•: å­˜åœ¨\nâœ… viewDetail æ–¹æ³•: å­˜åœ¨\nâœ… renderTable æ–¹æ³•: å­˜åœ¨`);
                } else {
                    updateTestResult(testId, 'error', 'âŒ JavaScript åŠŸèƒ½ä¸å®Œæ•´', 
                        `âŒ admin ç‰©ä»¶: ${adminExists ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\nâŒ loadData: ${hasLoadData ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\nâŒ viewDetail: ${hasViewDetail ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\nâŒ renderTable: ${hasRenderTable ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}`);
                }
            } catch (error) {
                updateTestResult(testId, 'error', 'âŒ JavaScript æ¸¬è©¦å¤±æ•—', 
                    `éŒ¯èª¤: ${error.message}`);
            }
        }

        async function testFrontendModal() {
            const testId = 'frontend-modal-test';
            startTest(testId);
            
            try {
                // Test modal functionality
                const modalElement = document.querySelector('#detailModal');
                const modalContent = document.querySelector('#detailContent');
                const hasRenderDetailModal = typeof window.admin !== 'undefined' && typeof window.admin.renderDetailModal === 'function';
                
                if (modalElement && modalContent && hasRenderDetailModal) {
                    updateTestResult(testId, 'success', 'âœ… Modal åŠŸèƒ½æ¸¬è©¦é€šé', 
                        `âœ… Modal å…ƒç´ : å­˜åœ¨\nâœ… Modal å…§å®¹å®¹å™¨: å­˜åœ¨\nâœ… renderDetailModal æ–¹æ³•: å­˜åœ¨`);
                } else {
                    updateTestResult(testId, 'error', 'âŒ Modal åŠŸèƒ½ä¸å®Œæ•´', 
                        `âŒ Modal å…ƒç´ : ${modalElement ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\nâŒ Modal å…§å®¹: ${modalContent ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\nâŒ renderDetailModal: ${hasRenderDetailModal ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}`);
                }
            } catch (error) {
                updateTestResult(testId, 'error', 'âŒ Modal æ¸¬è©¦å¤±æ•—', 
                    `éŒ¯èª¤: ${error.message}`);
            }
        }

        // Database Tests
        async function testDatabaseConnection() {
            const testId = 'db-connection-test';
            startTest(testId);
            
            try {
                const response = await fetch(`${API_BASE_URL}/test`, {
                    method: 'GET'
                });
                
                const data = await response.json();
                
                if (response.ok && data.success && data.table_exists !== undefined) {
                    updateTestResult(testId, 'success', 'âœ… è³‡æ–™åº«é€£æ¥æ­£å¸¸', 
                        `âœ… API å›æ‡‰æ­£å¸¸\nâœ… è³‡æ–™è¡¨æª¢æŸ¥: ${data.table_exists ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\næ™‚é–“æˆ³: ${data.timestamp}`);
                } else {
                    updateTestResult(testId, 'error', 'âŒ è³‡æ–™åº«é€£æ¥ç•°å¸¸', 
                        `Status: ${response.status}\nResponse: ${JSON.stringify(data, null, 2)}`);
                }
            } catch (error) {
                updateTestResult(testId, 'error', 'âŒ è³‡æ–™åº«æ¸¬è©¦å¤±æ•—', 
                    `éŒ¯èª¤: ${error.message}`);
            }
        }

        async function testComprehensive() {
            const testId = 'db-comprehensive-test';
            startTest(testId);
            
            try {
                const response = await fetch(`${API_BASE_URL}/comprehensive_test`, {
                    method: 'GET'
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    const summary = data.summary || {};
                    const allPassed = Object.values(summary).every(status => 
                        typeof status === 'string' && status.includes('âœ“')
                    );
                    
                    if (allPassed) {
                        updateTestResult(testId, 'success', 'âœ… ç¶œåˆæ¸¬è©¦å…¨éƒ¨é€šé', 
                            `æäº¤ ID: ${data.data?.submission_id}\n${Object.entries(summary).map(([key, value]) => `${key}: ${value}`).join('\n')}`);
                    } else {
                        updateTestResult(testId, 'error', 'âŒ ç¶œåˆæ¸¬è©¦éƒ¨åˆ†å¤±æ•—', 
                            `æäº¤ ID: ${data.data?.submission_id}\n${Object.entries(summary).map(([key, value]) => `${key}: ${value}`).join('\n')}`);
                    }
                } else {
                    updateTestResult(testId, 'error', 'âŒ ç¶œåˆæ¸¬è©¦åŸ·è¡Œå¤±æ•—', 
                        `Status: ${response.status}\nMessage: ${data.message || 'Unknown error'}\nResponse: ${JSON.stringify(data, null, 2)}`);
                }
            } catch (error) {
                updateTestResult(testId, 'error', 'âŒ ç¶œåˆæ¸¬è©¦è«‹æ±‚å¤±æ•—', 
                    `éŒ¯èª¤: ${error.message}`);
            }
        }

        // Main test runners
        async function runApiTests() {
            log('é–‹å§‹åŸ·è¡Œ API æ¸¬è©¦');
            testResults.total += 4;
            updateProgress();
            
            await testApiConnection();
            await testApiList();
            await testApiStructure();
            await testApiRoutes();
            
            updateSummary();
        }

        async function runFrontendTests() {
            log('é–‹å§‹åŸ·è¡Œå‰ç«¯æ¸¬è©¦');
            testResults.total += 3;
            updateProgress();
            
            await testFrontendLoad();
            await testFrontendJavaScript();
            await testFrontendModal();
            
            updateSummary();
        }

        async function runDatabaseTests() {
            log('é–‹å§‹åŸ·è¡Œè³‡æ–™åº«æ¸¬è©¦');
            testResults.total += 2;
            updateProgress();
            
            await testDatabaseConnection();
            await testComprehensive();
            
            updateSummary();
        }

        async function runAllTests() {
            log('é–‹å§‹åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦');
            clearResults();
            
            testResults.total = 9;
            updateProgress();
            
            await runApiTests();
            await runDatabaseTests();
            await runFrontendTests();
            
            log('æ‰€æœ‰æ¸¬è©¦åŸ·è¡Œå®Œç•¢');
        }

        function clearResults() {
            testResults = { total: 0, passed: 0, failed: 0, running: 0 };
            updateProgress();
            
            document.querySelectorAll('.test-case').forEach(testCase => {
                testCase.className = 'test-case';
                testCase.querySelector('.test-result').textContent = 'ç­‰å¾…åŸ·è¡Œ...';
                testCase.querySelector('.test-details').textContent = '';
            });
            
            updateSummary();
        }

        function updateSummary() {
            const summary = document.getElementById('summaryContent');
            const completed = testResults.passed + testResults.failed;
            
            if (completed === 0) {
                summary.innerHTML = 'é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹æ¸¬è©¦';
            } else {
                const successRate = testResults.total > 0 ? ((testResults.passed / testResults.total) * 100).toFixed(1) : 0;
                summary.innerHTML = `
                    <strong>æ¸¬è©¦çµæœæ‘˜è¦:</strong><br>
                    ç¸½æ¸¬è©¦æ•¸: ${testResults.total}<br>
                    é€šé: ${testResults.passed}<br>
                    å¤±æ•—: ${testResults.failed}<br>
                    æˆåŠŸç‡: ${successRate}%<br>
                    ç‹€æ…‹: ${completed === testResults.total ? (testResults.failed === 0 ? 'ğŸ‰ å…¨éƒ¨é€šé!' : 'âš ï¸ æœ‰æ¸¬è©¦å¤±æ•—') : 'ğŸ”„ æ¸¬è©¦é€²è¡Œä¸­...'}
                `;
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            log('EForm5 TDD æ¸¬è©¦é é¢å·²è¼‰å…¥');
            updateSummary();
        });
    </script>
</body>
</html>